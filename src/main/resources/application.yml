# Configuración de pasarelas de pago
stripe:
    api:
        secret-key: ${STRIPE_SECRET_KEY:sk_test_your_stripe_secret_key}
        publishable-key: ${STRIPE_PUBLISHABLE_KEY:pk_test_your_stripe_publishable_key}

paypal:
    client:
        id: ${PAYPAL_CLIENT_ID:your_paypal_client_id}
        secret: ${PAYPAL_CLIENT_SECRET:your_paypal_client_secret}
    environment: ${PAYPAL_ENVIRONMENT:sandbox}

# Configuración principal
spring:
    profiles:
        active: dev
    
# Configuración de logging
logging:
    level:
        com.paymentgateway: DEBUG
        org.springframework.security: DEBUG
    pattern:
        console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
        file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file:
        name: logs/payment-gateway.log

# Configuración de management
management:
    endpoints:
        web:
            exposure:
                include: health,info,metrics,prometheus
    endpoint:
        health:
            show-details: always
    prometheus:
        metrics:
            export:
                enabled: true

# Configuración de Swagger
springdoc:
    api-docs:
        path: /api-docs
    swagger-ui:
        path: /swagger-ui.html
        enabled: true
    show-actuator: true

---
# Perfil de desarrollo (usando Docker)
spring:
    config:
        activate:
            on-profile: dev
    datasource:
        url: jdbc:postgresql://localhost:5432/payment_gateway
        username: ${DB_USERNAME:payment_user}
        password: ${DB_PASSWORD:payment_password}
        driver-class-name: org.postgresql.Driver

    jpa:
        hibernate:
            ddl-auto: update  # Cambiado a 'update' para desarrollo
        show-sql: true
        properties:
            hibernate:
                dialect: org.hibernate.dialect.PostgreSQLDialect
                format_sql: true

    # Configuración de Redis (Docker)
    data:
        redis:
            host: ${REDIS_HOST:localhost}
            port: ${REDIS_PORT:6379}
            password: ${REDIS_PASSWORD:}
            timeout: 2000ms

    # Flyway deshabilitado para desarrollo rápido
    flyway:
        enabled: false

---
# Perfil de producción
spring:
    config:
        activate:
            on-profile: prod
    datasource:
        url: jdbc:postgresql://localhost:5432/payment_gateway
        username: ${DB_USERNAME:payment_user}
        password: ${DB_PASSWORD:payment_password}
        driver-class-name: org.postgresql.Driver

    jpa:
        hibernate:
            ddl-auto: validate
        show-sql: false
        properties:
            hibernate:
                dialect: org.hibernate.dialect.PostgreSQLDialect
                format_sql: true

    flyway:
        enabled: true
        locations: classpath:db/migration
        baseline-on-migrate: true

    # Configuración de Redis
    data:
        redis:
            host: ${REDIS_HOST:localhost}
            port: ${REDIS_PORT:6379}
            password: ${REDIS_PASSWORD:}
            timeout: 2000ms
